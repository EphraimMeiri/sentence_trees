(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7517:(e,t,r)=>{Promise.resolve().then(r.bind(r,2068))},2068:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});var n=r(5155),s=r(2115),i=r(6261),l=r(767),a=r(3463),d=r(9795);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,d.QP)((0,a.$)(t))}let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:o("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});c.displayName="Card";let f=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:o("flex flex-col space-y-1.5 p-6",r),...s})});f.displayName="CardHeader";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:o("text-2xl font-semibold leading-none tracking-tight",r),...s})});u.displayName="CardTitle",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:o("text-sm text-muted-foreground",r),...s})}).displayName="CardDescription";let x=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:o("p-6 pt-0",r),...s})});x.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:o("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter";var g=r(1290);let h=(0,r(652).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),m=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:l=!1,...a}=e,d=l?g.DX:"button";return(0,n.jsx)(d,{className:o(h({variant:s,size:i,className:r})),ref:t,...a})});m.displayName="Button";let p=s.forwardRef((e,t)=>{let{className:r,type:s,...i}=e;return(0,n.jsx)("input",{type:s,className:o("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...i})});p.displayName="Input";let v={N:"NP",V:"VP",A:"AP",P:"PP",Adv:"AdvP",aux:"",Det:""},b=e=>{let{node:t,selected:r,isLinking:l,onSelect:a,onUpdate:d,onLink:o}=e,c=(0,s.useRef)(null),[f,u]=(0,s.useState)(t.isLeaf?80:40);return(0,s.useEffect)(()=>{c.current&&u(Math.max(t.isLeaf?80:40,c.current.scrollWidth+20))},[t.label,t.isLeaf]),(0,n.jsxs)("g",{transform:"translate(".concat(t.x,",").concat(t.y,")"),className:"cursor-pointer",onClick:a,children:[(0,n.jsx)("rect",{x:-f/2,y:"-12",width:f,height:"24",fill:r?"#e2e8f0":l?"#fef3c7":"white",stroke:r?"#3b82f6":l?"#d97706":"none",strokeWidth:"2",rx:"4"}),(0,n.jsx)("foreignObject",{x:-f/2,y:"-12",width:f,height:"24",pointerEvents:"none",children:(0,n.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,n.jsx)(p,{ref:c,value:t.label,onChange:e=>d({...t,label:e.target.value}),className:"w-full h-5 text-center bg-transparent border-none text-xs font-medium p-0",onClick:e=>e.stopPropagation()})})}),t.isLeaf&&(0,n.jsx)("foreignObject",{x:-f/2,y:"15",width:f,height:"24",onClick:e=>e.stopPropagation(),children:(0,n.jsxs)("select",{value:t.pos||"",onChange:e=>d({...t,pos:e.target.value}),className:"w-full h-6 text-xs border rounded",children:[(0,n.jsx)("option",{value:"",children:"POS"}),Object.keys(v).map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})}),!t.isLeaf&&(0,n.jsxs)("g",{transform:"translate(0,18)",onClick:e=>{e.stopPropagation(),o(t.id)},children:[(0,n.jsx)("circle",{r:"8",fill:"white",stroke:"green",strokeWidth:"2"}),(0,n.jsx)(i.A,{size:10,className:"transform translate-x-[-5px] translate-y-[-5px]"})]})]})},j=e=>{let{from:t,to:r,onDelete:i}=e,[a,d]=(0,s.useState)(!1);return(0,n.jsxs)("g",{onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[(0,n.jsx)("line",{x1:t.x,y1:t.y+10,x2:r.x,y2:r.y-10,stroke:"black",strokeWidth:"1.5"}),a&&(0,n.jsxs)("g",{transform:"translate(".concat((t.x+r.x)/2,",").concat((t.y+r.y)/2,")"),onClick:i,children:[(0,n.jsx)("circle",{r:"8",fill:"white",stroke:"red",strokeWidth:"2",className:"cursor-pointer"}),(0,n.jsx)(l.A,{size:10,className:"transform translate-x-[-5px] translate-y-[-5px] cursor-pointer"})]})]})},y=()=>{let[e,t]=(0,s.useState)({sentence:"",nodes:[],edges:[],nextId:1,selected:[],error:"",linking:null}),[r,i]=(0,s.useState)({width:600,height:400}),l=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=()=>{if(l.current){let{width:e}=l.current.getBoundingClientRect();i({width:Math.max(600,e-32),height:Math.max(400,.6*e)})}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let a=()=>{let n=t=>e.edges.filter(e=>e.from===t).map(t=>e.nodes.find(e=>e.id===t.to)),s=t=>e.nodes.find(r=>{var n;return r.id===(null===(n=e.edges.find(e=>e.to===t))||void 0===n?void 0:n.from)}),i=.125*r.height,l=.875*r.height,a=r.width/2;t(e=>{let t=[...e.nodes];return t=t.map(e=>{let d=n(e.id),o=s(e.id),c=e.x,f=e.y;if(e.isLeaf){let n=t.filter(e=>e.isLeaf),s=n.findIndex(t=>t.id===e.id);c=r.width/(n.length+1)*(s+1),f=l}else"S"!==e.label||o?d.length&&(c=(Math.min(...d.map(e=>e.x))+Math.max(...d.map(e=>e.x)))/2,f=Math.min(...d.map(e=>e.y))-60):(c=a,f=i);return{...e,x:c,y:f}}),{...e,nodes:t}})};(0,s.useEffect)(()=>{a()},[e.edges,e.nodes,r]);let d=r=>{if(e.linking===r)t(e=>({...e,linking:null}));else if(null!==e.linking){let n=e.linking;t(e=>{let t={id:"".concat(n,"-").concat(r),from:n,to:r};return{...e,edges:[...e.edges,t],linking:null}})}else t(e=>({...e,linking:r}))};return(0,n.jsxs)(c,{className:"w-full",children:[(0,n.jsx)(f,{children:(0,n.jsx)(u,{children:"Linguistic Tree Diagram Editor"})}),(0,n.jsxs)(x,{children:[(0,n.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,n.jsx)(p,{value:e.sentence,onChange:e=>t(t=>({...t,sentence:e.target.value})),placeholder:"Enter your sentence...",className:"flex-grow"}),(0,n.jsx)(m,{onClick:()=>{if(!e.sentence.trim()){t(e=>({...e,error:"Please enter a sentence first"}));return}let n=e.sentence.trim().split(/\s+/),s=r.width/(n.length+1),i=[...n.map((e,t)=>({id:t+1,label:e,pos:"",x:s*(t+1),y:.875*r.height,isLeaf:!0})),{id:n.length+1,label:"S",x:r.width/2,y:.125*r.height,isLeaf:!1}];t(e=>({...e,nodes:i,nextId:n.length+2,selected:[],edges:[],error:""}))},children:"Create Leaf Nodes"}),(0,n.jsxs)(m,{onClick:()=>{if(e.selected.length<2){t(e=>({...e,error:"Select at least 2 nodes to create a parent"}));return}let r=e.nodes.filter(t=>e.selected.includes(t.id)),n=(Math.min(...r.map(e=>e.x))+Math.max(...r.map(e=>e.x)))/2,s=Math.min(...r.map(e=>e.y))-60;t(e=>({...e,nodes:[...e.nodes,{id:e.nextId,label:"New",x:n,y:s,isLeaf:!1}],edges:[...e.edges,...r.map(t=>({id:"".concat(e.nextId,"-").concat(t.id),from:e.nextId,to:t.id}))],nextId:e.nextId+1,selected:[]}))},disabled:e.selected.length<2,children:["Add Parent (",e.selected.length,")"]})]}),e.error&&(0,n.jsx)("div",{className:"text-red-500 mb-4 text-sm",children:e.error}),(0,n.jsx)("div",{className:"border rounded-lg p-4",ref:l,children:(0,n.jsxs)("svg",{width:r.width,height:r.height,className:"bg-white",children:[e.edges.map(r=>(0,n.jsx)(j,{from:e.nodes.find(e=>e.id===r.from),to:e.nodes.find(e=>e.id===r.to),onDelete:()=>t(e=>({...e,edges:e.edges.filter(e=>e.id!==r.id)}))},r.id)),e.nodes.map(r=>(0,n.jsx)(b,{node:r,selected:e.selected.includes(r.id),isLinking:null!==e.linking,onSelect:()=>t(e=>({...e,selected:e.selected.includes(r.id)?e.selected.filter(e=>e!==r.id):[...e.selected,r.id]})),onUpdate:e=>t(t=>({...t,nodes:t.nodes.map(t=>t.id===e.id?e:t)})),onLink:d},r.id))]})})]})]})};function w(){return(0,n.jsx)("main",{className:"container mx-auto p-4",children:(0,n.jsx)(y,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[953,441,517,358],()=>t(7517)),_N_E=e.O()}]);